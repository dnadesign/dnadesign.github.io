---
layout: post
tags : [css, responsive,]
title: "How to do it the DNA way"
author: "John Milmine"
---

We're known for producing well crafted and tailored design solutions and our 
development team has always done the same with the code they've produced. 
However as HTML and CSS is notoriously subjective, settling on a specific way of 
doing things across the team has been hard. We've worked on approaches to 
managing large CSS applications before (OOCSS) however that effort was largely 
superseded by responsive and more modern technology support such as advanced 
selectors and IE support multiple classes better. 

In the last two years the projects we've been working on have been getting 
larger, longer and wider in support. Between more devices, touch, responsive and
increasing expectations of user experience, pressure has been on to quickly 
scale a team and produce consistent results across the board.

The other part of this challenge is dealing with staff being shifted between
projects and the introduction of thirdparty developers to our workflow. We do 
not want to introduce inconsistencies in how DNA produces work. We also want to 
be able to quickly communicate to all the developers in the process what and how 
we structure things in order to reduce code review, rework and to improve 
efficiencies of working within larger larger front-end team.

Now we've turned to a combination of BEM and atomic design. We believe this will 
enable our developers to work together easily and produce consistent, 
professional, maintainable results for clients.

The steps below define how we start our projects and the rules we aim to follow
throughout the process.

## Step 1. Setup folder structure

* [Download boilerplate here](https://github.com/dnadesign/dna_frontend_boilerplate)
* [Grunt file for file structure](https://github.com/dnadesign/dna_frontend_boilerplate/blob/master/Gruntfile.js)

## Step 2. Identify components used on the site

Work through provided art files and wireframes circling components. A component
should translate to a segment of the work involved on the webpage, for example 
common components include header, footer, main nav, carousel section or sidebar
widgets. 

Components are allowed exist within components. For example header and main nav 
may be separate components even though nav_main only occurs in header. 

The goal of components is to create easily identifiable and manageable code. 

## Step 3. Populate each component

Build each component out. We have a set of rules to follow for this step

## Rules

### 1 - Each component name must be unique and descriptive.

### 2 - New folder for each component

### 3 - New file for each breakpoint and resolution

* component_1.xsmall.less
* component_1.xsmall.retina.less
* component_1.small.less
* component_1.small.retina.less

### 4 - Pages or page types are not components. 

Do not put classes on the body element or similar in order to style a page. This 
approach should only be used in rare circumstances and leads to unnecessary 
nested of classes. If you need to modify a component for a particular page, 
create a modifier that can be reused.

```html
<a class="btn btn__noleftnav"></a>
```

### 5 - Class names should contain only underscores, no hyphens or camelCase.

Just convention, however underscores also makes the class easier to select, as 
one click selects the whole class, rather than a word at a time.

### 6 - Each class within a component must start with the component name and an 
underscore.

For example .sidebar .sidebar_title NOT .sidebar .title.

Although the latter seems better as it's simpler, and you can namespace your 
css to encapsulate bleed, it still bleeds. 

If two components have `.title`, and one of them is nested in another then the 
outer component's styling for `.title` has the potential to bleed into the inner 
component's `.title`.

Therefore all classnames inside a component must be prefixed by the component's 
name, e.g. `.sidebar_title` NOT `.title`

#### 7) Use multiple classes not single class patterns

```html
<a class="btn btn__secondary"></a>
```

is better than

```html
<a class="btn_secondary"></a>
```

While in the latter the HTML is simpler, it reduces flexibility. We want lots of 
modifiers in a component to create a range of scenarios. The original example 
assumes there's only one type of modifier. Once this is not the case the single 
class pattern breaks.

```html
<a class="btn btn__secondary btn__large"></a> 
```
is better than

```html
<a href="btn_secondary_large"></a>
```

### 8 - Component parts are not the same as component modifiers

Component or component part modifiers should be highlighted by double 
underscores. Whereas component parts should be denoted with single underscores.

```html
<a class="btn btn__secondary btn__large">
	<span class="btn_arrow">&nbsp;</span>
</a>
```

### 9 - Don't style other components within another component.

When a component is nested inside another it's tempting to style that component 
based on context, e.g. .products .btn

This makes code very hard to comprehend, as one component is dependant on 
another component folder to style it correctly.

In this situation create a new modifier for the component in the original 
component folder.

For example .btn.btn__products

### 10 - Browser hacks should be class based rather than hack based and should 
be with original code.

Separate browser stylesheets make code hard to debug as developers need to piece 
together what is happening. Therefore the following example is what should 
happen.

```css
h2 {
	color: blue
}

.ie7 h2 {
	color: red
}
```
The downside to this approach hits home with responsive. As .ie7 h2 can't be 
overridden in the next stylesheet without using the same specificity.

```css
h2,
.ie7 h2 {
	color: green
}

```
The work-around for this will be adding a class on the HTML element called 
"all". This means the following will override the initial styles.

```css
.all h2 {
	color: green;
}

```

### 12 - Use nesting sparingly.

If using a pre-processor try to ensure you don't nest more the 3 times if 
possible. It can be tempted to nest like a bird but this adds a performance
impact. This simplifies resulting css rules and makes specificity easier.

### 13 - Put javascript alongside the css

Global javasctript should go in build/global/js, this includes things like 
jQuery and libraries. Whereas js for carousel's should go in the carousel 
component folder. This also has the advantage or taking a component folder into 
a different project and having most of the assets you need.

## Style guidelines

* Place your braces { on same line as selector. The trailing brace should be on
it's own new line

* Space between rule and brace (.asd { NOT .asd{))
* Properties on new line, even if it's a single property.
* space between property and value colon ("display: none" NOT "display:none")
* 1 line between rules
* JS files that aren't minified should be *.src.js and minified should be *.min.js
* 4 space tabs should be used in files.



### Workflow

This is particularly important for responsive. We want mobile first to be the outcome we want, where the first stylesheet doesn't have a media query and subsequent stylesheets have rules which add to or override the styles setup already.

In terms of workflow we've found that working on larger sizes first helps. This may sound strange however building the most complex HTML first results in less re-work. 

1. Build the large sizes, in the smallest breakpoint, so the site doesn't resize. 
1. Then look at the small design.
1. Start moving rules that only apply to larger sizes up to the appropriate breakpoint file.
1. Re-define what it should look at small sizes.
1. Rinse and repeat.


### Good

```css
.rule {
	position: absolute;
	top: 10px;
	right: 10px;
}

.rule__modifer {
	background: red;

	h2 {
		color: #000;
	}
}
```

### Bad

```css
.rule {position: absolute; top: 10px;right:10px;}

.rule__modifer {
	background: red;
}

## Further reading

* [Nicolas Gallagher on BEM](http://nicolasgallagher.com/about-html-semantics-front-end-architecture)
* [CSS Wizardary on BEM](http://csswizardry.com/2013/01/mindbemding-getting-your-head-round-bem-syntax/)
* [Brad Frost on atomic design](http://bradfrostweb.com/blog/post/atomic-web-design/)
* [Robin Rendle on atomic Design on Smashing magazine](http://coding.smashingmagazine.com/2013/08/02/other-interface-atomic-design-sass/)



